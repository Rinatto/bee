import{initializeYandexMap}from"./yandexMap.js";import{startTimer,stopTimer}from"./timer.js";function loadHTML(e,t){fetch(e).then((e=>e.text())).then((e=>{document.querySelector(".main").innerHTML=e,t&&t()})).catch((t=>{console.error("Failed to load page: ",t),"/bee/index.html"!==e&&(history.replaceState(null,null,"/bee/"),loadPageContent("index",!0))}))}document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".menu-element");e.forEach((t=>{t.addEventListener("click",(function(t){t.preventDefault(),e.forEach((e=>e.classList.remove("active-link"))),this.classList.add("active-link"),loadPageContent(this.getAttribute("href").replace("/bee/",""),!0)}))})),document.querySelectorAll("a").forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault(),loadPageContent(this.getAttribute("href").replace("/bee/",""),!0)}))})),window.addEventListener("popstate",(e=>{e.state&&e.state.page?loadPageContent(e.state.page,!1):loadPageContent("index",!1)})),loadPageContent(window.location.pathname.replace("/bee/","")||"index",!1)}));export function loadPageContent(e,t=!0){const n={activity:"activity.html",map:"map.html",timer:"timer.html",resume:"resume.html",index:"index.html"}[e];if(!n)return console.error("Unknown page:",e),history.replaceState(null,null,"/bee/"),void loadPageContent("index",!0);"timer"!==e&&stopTimer();let a=null;"map"===e?a=initializeYandexMap:"timer"===e&&(a=startTimer),loadHTML(`/bee/${n}`,a),t&&history.pushState({page:e},null,`/bee/${e}`)}