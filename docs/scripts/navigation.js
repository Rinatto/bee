import{initializeYandexMap}from"./yandexMap.js";import{startTimer,stopTimer}from"./timer.js";function loadHTML(t,e){fetch(t).then((t=>t.text())).then((t=>{document.querySelector(".main").innerHTML=t,e&&e()})).catch((t=>console.error("Failed to load page: ",t)))}document.addEventListener("DOMContentLoaded",(()=>{const t=document.querySelectorAll(".menu-element");t.forEach((e=>{e.addEventListener("click",(function(){t.forEach((t=>t.classList.remove("active-link"))),this.classList.add("active-link"),loadPageContent(this.textContent.trim().toLowerCase(),!0)}))})),window.addEventListener("popstate",(t=>{t.state&&t.state.page&&loadPageContent(t.state.page,!1)})),loadPageContent(window.location.pathname.replace("/","")||"activity",!1)}));export function loadPageContent(t,e=!0){const a={activity:"activity.html",map:"map.html",time:"timer.html",resume:"resume.html"}[t];if(!a)return void console.error("Unknown page:",t);"time"!==t&&stopTimer();let n=null;"map"===t?n=initializeYandexMap:"time"===t&&(n=startTimer),loadHTML(a,n),e&&history.pushState({page:t},null,`/${t}`)}