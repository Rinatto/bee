import{initializeYandexMap}from"./yandexMap.js";import{startTimer,stopTimer}from"./timer.js";function loadHTML(e,t){fetch(e).then((e=>e.text())).then((e=>{document.querySelector(".main").innerHTML=e,t&&t()})).catch((e=>{console.error("Failed to load page: ",e),history.replaceState(null,null,"/bee/"),loadPageContent("index",!0)}))}document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".menu-element");e.forEach((t=>{t.addEventListener("click",(function(t){t.preventDefault(),e.forEach((e=>e.classList.remove("active-link"))),this.classList.add("active-link"),loadPageContent(this.getAttribute("href").replace("/",""),!0)}))})),window.addEventListener("popstate",(e=>{e.state&&e.state.page?loadPageContent(e.state.page,!1):loadPageContent("index",!1)}));const t=window.location.pathname.replace("/bee/","")||"index";["activity","map","timer","resume"].includes(t)?loadPageContent(t,!1):(history.replaceState(null,null,"/bee/"),loadPageContent("index",!1))}));export function loadPageContent(e,t=!0){const n={activity:"activity.html",map:"map.html",timer:"timer.html",resume:"resume.html"}[e];if(!n)return console.error("Unknown page:",e),history.replaceState(null,null,"/bee/"),void loadPageContent("index",!0);"timer"!==e&&stopTimer();let a=null;"map"===e?a=initializeYandexMap:"timer"===e&&(a=startTimer),loadHTML(`/bee/${n}`,a),t&&history.pushState({page:e},null,`/bee/${e}`)}