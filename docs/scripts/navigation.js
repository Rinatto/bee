import{initializeYandexMap}from"./yandexMap.js";import{startTimer,stopTimer}from"./timer.js";function loadHTML(e,t){fetch(e).then((e=>e.text())).then((e=>{document.querySelector(".main").innerHTML=e,t&&t()})).catch((e=>console.error("Failed to load page: ",e)))}document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".menu-element");e.forEach((t=>{t.addEventListener("click",(function(t){t.preventDefault(),e.forEach((e=>e.classList.remove("active-link"))),this.classList.add("active-link"),loadPageContent(this.getAttribute("href").replace("/",""),!0)}))})),window.addEventListener("popstate",(e=>{e.state&&e.state.page&&loadPageContent(e.state.page,!1)})),loadPageContent(window.location.pathname.replace("/","")||"activity",!1)}));export function loadPageContent(e,t=!0){const a={activity:"activity.html",map:"map.html",time:"timer.html",resume:"resume.html"}[e];if(!a)return void console.error("Unknown page:",e);"time"!==e&&stopTimer();let n=null;"map"===e?n=initializeYandexMap:"time"===e&&(n=startTimer),loadHTML(`/bee/${a}`,n),t&&history.pushState({page:e},null,`/${e}`)}